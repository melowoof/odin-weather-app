(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();async function w(e){const t=S(e);if(t)return t;const o=`http://api.weatherapi.com/v1/forecast.json?key=0542a923612c4aadaed232622240509&q=${e}&days=10&aqi=no&alerts=no`;try{const n=await fetch(o,{mode:"cors"});if(!n.ok)throw new Error(`Response status error: ${n.status} ${n.statusText}`);const a=await n.json();return b(e,a),console.log("Fetched new data:",a),a}catch(n){T(n)}}function S(e){const t=localStorage.getItem(e);if(t){const{timestamp:r,data:o}=JSON.parse(t),n=30*60*1e3;if(Date.now()-r<n)return console.log("Serving from cache:",o),o;console.log("Cache expired for:",e),localStorage.removeItem(e)}return null}function b(e,t){const o=JSON.parse(localStorage.getItem("cachedCities"))||[];if(!o.includes(e)){if(o.length>=10){const n=o.shift();localStorage.removeItem(n)}o.push(e),localStorage.setItem("cachedCities",JSON.stringify(o))}localStorage.setItem(e,JSON.stringify({timestamp:Date.now(),data:t}))}function T(e){throw console.error("Failed to fetch weather data:",e),e}function $(e){const t=document.querySelectorAll("#current-weather-container .current-weather-temperature"),r=document.querySelectorAll("#current-weather-container .current-weather-status"),o=document.querySelector("#location");t.forEach(n=>{n.textContent=`${u(e.current.temp_c)}`}),r.forEach(n=>{n.textContent=e.current.condition.text}),o.textContent=e.location.name}function M(e){const t=document.querySelector("#hourly-forecast");t.innerHTML="";const r=document.createElement("div");r.className="forecast-hour",r.innerHTML=`<div class="forecast-hour-hour">Now</div>
            <div><div class="forecast-hour-weather-status-icon"><img width="32" height="32" src="${e.current.condition.icon}"/></div>
            <div class="chance-of-rain"></div></div>
            <div class="forecast-hour-temperature">${u(e.current.temp_c)}&deg;</div>`,t.appendChild(r);const o=D(),n=k(g(o));let a=Number(n.split(":")[0]);a===0&&(a=24);let c=1;for(let i=0;i<=1;i++){for(let s=a;s<24;s++){const l=document.createElement("div");if(l.className="forecast-hour",g(e.forecast.forecastday[i].hour[s].time),l.innerHTML=`<div class="forecast-hour-hour">${x(g(e.forecast.forecastday[i].hour[s].time))}</div>
                      <div><div class="forecast-hour-weather-status-icon"><img width="32" height="32" src="${e.current.condition.icon}"/></div>
                      <div class="chance-of-rain">${p(e.forecast.forecastday[i].hour[s].chance_of_rain)}</div></div>
                      <div class="forecast-hour-temperature">${u(e.forecast.forecastday[i].hour[s].temp_c)}&deg;</div>`,t.appendChild(l),c++,c>=25)break}a=0}}function D(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${t}-${r}-${o} ${n}:${a}`}function p(e){return e!==0?`${e} %`:""}function x(e){let t=Number(e.split(":")[0]);const r=t>=12?"PM":"AM";return t>12?t-=12:t===0&&(t=12),`${t}<small>${r}</small>`}function h(e){let[t,r]=e.split(":").map(Number);const o=t>=12?"PM":"AM";return t>12?t-=12:t===0&&(t=12),`${t}:${r}<small>${o}</small>`}function f(e){const t=/^(0?[1-9]|1[0-2]):([0-5][0-9]) ?([AP]M)$/i,r=e.match(t);if(!r)throw new Error("Invalid time format. Please use 'hh:mm AM/PM'.");let o=parseInt(r[1],10);const n=r[2],a=r[3].toUpperCase();a==="PM"&&o<12?o+=12:a==="AM"&&o===12&&(o=0);const c=String(o).padStart(2,"0"),i=String(n).padStart(2,"0");return`${c}:${i}`}function k(e){const t=Number(e.split(":")[0])+1,r=t.toString().padStart(2,"0");return t>23?"00:00":`${r}:00`}function g(e){return e.match(/\d{2}:\d{2}$/)[0]}function L(){const e=document.querySelector("#temperature-weather-status-normal"),t=document.querySelector("#temperature-weather-status-minimized"),r=100;window.addEventListener("scroll",()=>{window.scrollY>r?(e.style.opacity="0",t.style.opacity="1"):(e.style.opacity="1",t.style.opacity="0")})}function u(e){return Math.floor(e)}function H(e){const t=document.querySelector("#ten-day-forecast");t.innerHTML="";const r=e.current.temp_c;v(e.forecast.forecastday[0].day.mintemp_c,e.forecast.forecastday[0].day.maxtemp_c,r);const o=[],n=[];for(let i=1;i<10;i++)o.push(e.forecast.forecastday[i].day.mintemp_c),n.push(e.forecast.forecastday[i].day.maxtemp_c);const a=Math.min(...o),c=Math.max(...n);for(let i=0;i<10;i++){const s=document.createElement("div"),l=i===0?"Today":q(e.forecast.forecastday[i].date),m=i===0?'<div class="uv-index-meter-point"></div>':"";s.innerHTML=`<div class="forecast-day">
              <div class="forecast-day-date">${l}</div>
              <div class="forecast-day-weather-status"><img src="${e.forecast.forecastday[i].day.condition.icon}"
                  width="32" height="32" alt="" class="forecast-day-icon">
                <div class="forecast-day-chance-of-rain">${p(e.forecast.forecastday[i].day.daily_chance_of_rain)}</div>
              </div>
              <div class="forecast-day-high-low-temp">
                <div class="forecast-day-low-temp">${u(e.forecast.forecastday[i].day.mintemp_c)}&deg;</div>
                <div class="forecast-day-temperature-meter">
                  <div class="forecast-day-temperature-meter-filled" id="forecast-day-temperature-meter-filled-${i}">${m}
                  </div>
                </div>
                <div class="forecast-day-high-temp">${u(e.forecast.forecastday[i].day.maxtemp_c)}&deg;</div>
              </div>
            </div>`,t.appendChild(s);const d=document.getElementById(`forecast-day-temperature-meter-filled-${i}`),y=v(a,c,e.forecast.forecastday[i].day.mintemp_c);d.style.left=`${y}%`,d.style.width=`${v(a,c,e.forecast.forecastday[i].day.maxtemp_c)-y}%`}}function q(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=t.getDay();return r[o]}function v(e,t,r){return(r-e)/(t-e)*100}function E(e){const t=document.querySelector("#uv-index");t.innerHTML="";const r=e.current.uv;let o;const n=v(0,11,r);r>=0&&r<=2?o="Low":r>=3&&r<=5?o="Moderate":r>=6&&r<=7?o="High":r>=8&&r<=10?o="Very High":r>=11&&(o="Extreme");const a=document.createElement("div");a.innerHTML=`<div class="uv-index-status">
              <div class="uv-index-value">${r}</div>
              <div class="uv-index-level">${o}</div>
            </div>
            <div class="uv-index-meter-container">
              <div class="uv-index-meter">
                <div class="uv-index-meter-point"></div>
              </div>
            </div>
`,t.appendChild(a);const c=document.querySelector(".uv-index-meter-point");c.style.left=`${n}%`}function N(e){let t=e.forecast.forecastday[0].astro.sunrise,r=e.forecast.forecastday[0].astro.sunset;const o=g(e.location.localtime),n=new Date,a=new Date(n.toDateString()+" "+o),c=new Date(n.toDateString()+" "+t),i=new Date(n.toDateString()+" "+r);let s="SUNRISE";a>=c&&a<=i?(t=f(e.forecast.forecastday[1].astro.sunrise),s="SUNSET"):o>=i&&(t=f(e.forecast.forecastday[1].astro.sunrise),r=f(e.forecast.forecastday[1].astro.sunset),s="SUNRISE"),document.querySelector("#twilight");const l=document.querySelector(".grid-item-name.twilight");l.innerHTML=s;const m=document.querySelector("#twilight-big-time"),d=document.querySelector("#twilight-small-time");m.innerHTML=h(f(s==="SUNRISE"?t:r)),d.innerHTML=s==="SUNRISE"?`Sunset: ${h(f(r))}`:`Sunrise: ${h(f(t))}`}function _(e){const t=document.querySelector("#wind-speed"),r=document.querySelector("#wind-direction");let o=e.current.wind_dir;o==="N"?o="North":o==="S"?o="South":o==="W"?o="West":o==="E"?o="East":o==="NW"?o="North West":o==="NE"?o="North East":o==="SW"?o="South West":o==="SE"&&(o="South East"),t.innerHTML=`${Math.floor(e.current.wind_kph)} <small>km/h</small>`,r.innerHTML=`${o}`}function I(e){const t=document.querySelector("#precipitation-level");t.innerHTML=`${Math.floor(e.forecast.forecastday[0].day.totalprecip_mm)} mm`}function P(e){const t=document.querySelector("#feels-like");t.innerHTML=`${Math.floor(u(e.current.feelslike_c))}&deg;`}function z(e){const t=document.querySelector("#moon-phase-value"),r=document.querySelector("#next-moon-rise");let o=e.forecast.forecastday[0].astro.moon_phase,n=e.forecast.forecastday[0].astro.moonrise;t.innerHTML=o,r.innerHTML=`Today's moonrise: ${h(f(n))}`}function C(e){const t=document.querySelector("#visibility-range"),r=document.querySelector("#visibility-desc"),o=e.current.vis_km;let n;o>10?n="Clear visibility.":o>=6&&o<=10?n="Good visibility.":o>=3&&o<6?n="Moderate visibility.":o>=1&&o<3?n="Poor visibility.":o<1?n="Very Poor visibility.":n="Invalid visibility Value.",t.innerHTML=`${o} km`,r.innerHTML=n}function A(e){const t=document.querySelector("#humidity-level"),r=document.querySelector("#dew-point");t.innerHTML=`${e.current.humidity} %`,r.innerHTML=`The dew point is ${u(e.current.dewpoint_c)}&deg; right now.`}function O(e){const t=document.querySelector("#pressure");t.innerHTML=`${e.current.pressure_mb} hPa`}function F(e){const t=document.querySelector("#averages-value"),r=document.querySelector("#today-average"),o=document.querySelector("#average-average"),n=e.forecast.forecastday[0].day.maxtemp_c,a=[],c=[];for(let d=1;d<10;d++)a.push(e.forecast.forecastday[d].day.mintemp_c),c.push(e.forecast.forecastday[d].day.maxtemp_c);const i=Math.min(...a),l=(Math.max(...c)+i)/2,m=l-n;t.innerHTML=`${Math.floor(m)}&deg;`,r.innerHTML=`H:${Math.floor(u(n))}&deg;`,o.innerHTML=`H:${Math.floor(u(l))}&deg;`}function W(e){let t,r;const o=e.current.is_day,n=e.current.condition.text.toLowerCase();if(o)switch(!0){case n.includes("clear"):t="var(--clear-gradient)",r="var(--clear-rgba)";break;case n.includes("partly cloudy"):t="var(--partly-cloudy-gradient)",r="var(--partly-cloudy-rgba)";break;case n.includes("cloudy"):t="var(--cloudy-gradient)",r="var(--cloudy-rgba)";break;case n.includes("rain"):t="var(--rain-gradient)",r="var(--rain-rgba)";break;case n.includes("snow"):t="var(--snow-gradient)",r="var(--snow-rgba)";break;case n.includes("thunderstorms"):t="var(--thunderstorms-gradient)",r="var(--thunderstorms-rgba)";break;case n.includes("fog"):t="var(--fog-gradient)",r="var(--fog-rgba)";break;case n.includes("windy"):t="var(--windy-gradient)",r="var(--windy-rgba)";break;case n.includes("drizzle"):t="var(--drizzle-gradient)",r="var(--drizzle-rgba)";break;case n.includes("haze"):t="var(--haze-gradient)",r="var(--haze-rgba)";break;case n.includes("sleet"):t="var(--sleet-gradient)",r="var(--sleet-rgba)";break;case n.includes("tornado"):t="var(--tornado-gradient)",r="var(--tornado-rgba)";break;default:t="var(--clear-gradient)",r="var(--clear-rgba)"}else switch(!0){case n.includes("clear"):t="var(--clear-night-gradient)",r="var(--clear-night-rgba)";break;case n.includes("partly cloudy"):t="var(--partly-cloudy-night-gradient)",r="var(--partly-cloudy-night-rgba)";break;case n.includes("cloudy"):t="var(--cloudy-night-gradient)",r="var(--cloudy-night-rgba)";break;case n.includes("rain"):t="var(--rain-night-gradient)",r="var(--rain-night-rgba)";break;case n.includes("snow"):t="var(--snow-night-gradient)",r="var(--snow-night-rgba)";break;case n.includes("thunderstorms"):t="var(--thunderstorms-night-gradient)",r="var(--thunderstorms-night-rgba)";break;case n.includes("fog"):t="var(--fog-night-gradient)",r="var(--fog-night-rgba)";break;case n.includes("windy"):t="var(--windy-night-gradient)",r="var(--windy-night-rgba)";break;case n.includes("drizzle"):t="var(--drizzle-night-gradient)",r="var(--drizzle-night-rgba)";break;case n.includes("haze"):t="var(--haze-night-gradient)",r="var(--haze-night-rgba)";break;case n.includes("sleet"):t="var(--sleet-night-gradient)",r="var(--sleet-night-rgba)";break;case n.includes("tornado"):t="var(--tornado-night-gradient)",r="var(--tornado-night-rgba)";break;default:t="var(--clear-night-gradient)",r="var(--clear-night-rgba)"}document.body.style.background=t,document.body.style.backgroundAttachment="fixed";const a=document.querySelectorAll(".grid-item"),c=document.querySelector("#search-box");a.forEach(i=>{i.style.backgroundColor=r}),c.style.backgroundColor=r}L();window.onload=function(){U()};document.querySelector("#search-box").addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();try{V(e).then(t=>{R(t)})}catch(t){console.error("Error fetching weather data:",t)}}});function R(e){$(e),M(e),H(e),E(e),N(e),_(e),I(e),P(e),z(e),C(e),A(e),O(e),F(e),W(e)}async function V(e){const t=e.target.value;if(t){const r=await w(t);if(r)return console.log("Search result:",r),r}}function U(){const e=document.querySelector("#search-box");e.value="Lund";const t=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",bubbles:!0});e.dispatchEvent(t)}
